<?php
    if (!$no_layout) {
        if ($current_user && !$current_user->isBlocked()) {
            $layout_name = 'connected.phtml';
        } elseif ($current_user) {
            $layout_name = 'connected_blocked.phtml';
        } else {
            $layout_name = 'not_connected.phtml';
        }

        if (!isset($back)) {
            $back = null;
        }

        $this->layout($layout_name, [
            // The title can be considered as safe since it's already sanitized in
            // the calling view.
            'title' => $this->safe('title'),
            'current_action_pointer' => $current_action_pointer,
            'current_locale' => $current_locale,
            'current_tab' => $current_tab,
            'current_page' => $current_page,
            'canonical' => $canonical,
            'styles' => $styles,
            'feed' => $feed,
            'open_graph' => $open_graph,
            'back' => $back,
        ]);
    }

    echo $this->safe('content');
?>
