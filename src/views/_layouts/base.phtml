<?php
    if (!$no_layout) {
        if ($current_user) {
            $must_validate = $current_user->mustValidateEmail();
            $must_renew = $subscriptions_enabled && $current_user->isSubscriptionOverdue();
            if ($must_validate || $must_renew) {
                $layout_name = 'connected_blocked.phtml';
            } else {
                $layout_name = 'connected.phtml';
            }
        } else {
            $layout_name = 'not_connected.phtml';
        }

        $this->layout($layout_name, [
            // The title can be considered as safe since it's already sanitized in
            // the calling view.
            'title' => $this->safe('title'),
            'current_action_pointer' => $current_action_pointer,
            'current_locale' => $current_locale,
            'current_tab' => $current_tab,
            'canonical' => $canonical,
            'styles' => $styles,
            'banner' => $banner,
        ]);
    }

    echo $this->safe('content');
?>
