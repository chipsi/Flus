<?php
    $this->layout('base.phtml', [
        'title' => $link->title,
        'canonical' => url_full('show link', ['id' => $link->id]),
    ]);
?>

<?php if ($link->fetched_at): ?>
    <p>
        <a class="anchor--action icon icon--anchor icon--undo" href="<?= url('show bookmarked') ?>">
            <?= _('Back') ?>
        </a>
    </p>

    <div class="title">
        <h1><?= $this->protect($link->title) ?></h1>
    </div>

    <p>
        <a
            class="anchor--action icon icon--anchor icon--link"
            target="_blank"
            rel="noopener noreferrer"
            href="<?= $link->url ?>"
        >
            <?= _('open') ?>
        </a>
    </p>
<?php else: ?>
    <p>
        <?= _('Please wait while weâ€™re fetching information about this link.') ?>
    </p>

    <form
         method="post"
         action="<?= url('fetch link', ['id' => $link->id]) ?>"
         data-controller="link-fetcher"
     >
        <input type="hidden" name="csrf" value="<?= csrf_token() ?>" />
        <button type="submit" class="button--primary">
            <?= _('Fetch link information') ?>
        </button>
    </form>
<?php endif; ?>
