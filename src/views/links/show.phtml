<?php
    $this->layout('base.phtml', [
        'title' => $link->title,
        'canonical' => url_full('link', ['id' => $link->id]),
    ]);
?>

<div class="section">
    <nav class="section__nav">
        <div class="section__nav-separator"></div>

        <a
            href="<?= url('edit link', ['id' => $link->id]) ?>"
            title="<?= _('Settings') ?>"
            aria-label="<?= _('Settings') ?>"
        >
            <i class="icon icon--anchor icon--only icon--cog"></i>
        </a>
    </nav>

    <div class="section__title section__title--nolowercase">
        <h1><?= $this->protect($link->title) ?></h1>
    </div>

    <p class="link__details paragraph--centered">
        <?= $this->protect($link->host()) ?>&nbsp;Â·&nbsp;<?= format_reading_time($link->reading_time) ?>
    </p>

    <p class="paragraph--centered">
        <a
            class="anchor--action icon icon--anchor icon--link"
            target="_blank"
            rel="noopener noreferrer"
            href="<?= $link->url ?>"
        >
            <?= _('open') ?>
        </a>
    </p>

    <section class="subsection subsection--small">
        <header class="subsection__header header">
            <div class="header__container">
                <h2 class="subsection__title"><?= _('Collections') ?></h2>

                <a class="icon icon--anchor icon--cog" href="<?= url('link collections', ['id' => $link->id]) ?>">
                    <span class="sr-only"><?= _('Manage') ?></span>
                </a>
            </div>
        </header>

        <ul class="list list--no-style">
            <?php foreach ($collections as $collection): ?>
                <li class="list__item icon <?= $collection->type === 'bookmarks' ? 'icon--bookmark' : 'icon--collection' ?>">
                    <?= $this->protect($collection->name()) ?>
                </li>
            <?php endforeach; ?>
        </ul>
    </section>
</div>
